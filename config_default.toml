# kiss default configuration
# 
# Thresholds based on analysis of high-quality open-source codebases:
# - Python: rich, click, attrs, httpx (366 files, 5426 functions)
# - Rust: fd, ripgrep (123 files, 3002 functions)
#
# These thresholds target the top ~5-10% of code as potential issues,
# balancing strictness with practicality.

#------------------------------------------------------------------------------
# SHARED SETTINGS (apply to both languages, can be overridden below)
#------------------------------------------------------------------------------

[shared]
lines_per_file = 800            # Higher to accommodate inline test modules
types_per_file = 10             # Classes (Python) or structs/enums (Rust)
imports_per_file = 20           # Many imports = many dependencies; lib.rs facade pattern needs more

#------------------------------------------------------------------------------
# PYTHON-SPECIFIC SETTINGS
#------------------------------------------------------------------------------

[python]
# Function-level metrics
statements_per_function = 30    # P95=18, P99=37; allow headroom for complex logic
positional_args = 5             # P99=7; Python favors keyword args
keyword_only_args = 6           # P99=7; generous for API-heavy code
max_indentation = 4             # P99=4; deeply nested = hard to read
branches_per_function = 10      # P99=9; if/elif chains add up
local_variables = 10            # P99=11; many variables = hard to track
cyclomatic_complexity = 10      # P99=15; industry standard

# Class-level metrics
methods_per_class = 20          # P95=10, P99=28; Python classes can be large
lcom = 50                       # P99=75; flag only severely incohesive classes

# Graph metrics
fan_out = 20                    # lib.rs facade pattern needs higher
fan_in = 20                     # P99=50; flag super-central modules
transitive_deps = 30            # P99=18; allow for complex projects

#------------------------------------------------------------------------------
# RUST-SPECIFIC SETTINGS
#------------------------------------------------------------------------------

[rust]
# Function-level metrics
statements_per_function = 25    # P95=15, P99=30; Rust functions tend shorter
arguments = 8                   # P99=3, max=7; allow helpers with context params
max_indentation = 4             # P99=3, max=6; deeply nested = hard to read
branches_per_function = 8       # P95=2, P99=6; match arms add up fast
local_variables = 10            # P99=10; aligns with empirical data
cyclomatic_complexity = 20      # Higher for match-heavy lookup tables

# Type-level metrics
methods_per_type = 15           # P95=12, P99=24; Rust impls can be large
lcom = 100                      # 100% allows visitor patterns with disjoint method access

# File-level metrics (override shared)
lines_per_file = 500            # Keep modules focused
types_per_file = 8              # P95=9; one type + helpers is typical

# Graph metrics
fan_out = 20                    # lib.rs facade pattern needs higher
fan_in = 20                     # P99=16, max=44; core modules are OK
transitive_deps = 30            # Data shows max=6; allow for larger projects

